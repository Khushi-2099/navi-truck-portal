<app-navbar-after-home-page [navtheme]="'whitetheme'"></app-navbar-after-home-page>

<div class="an-pending">
    
    <div class="card left-card border border-2">
            <!-- <div (click)="redirect('car-sub')"  *ngFor="let car of carDetails">
                <img class="car-card" src='{{techDetailsParameter.pramData.pramData.image}}'>
            </div> -->
            <h5 class="card-title" style="font-family: 'Verdana'; text-align: center; color:#0381BA; font-size: 15px;">
                <b>Application ID: {{techDetailsParameter.pramData.pramData.applicationId}}</b>
            </h5>
            <div *ngFor="let truck of techDetailsParameter.truckList; let i = index">
                <div class="car-card-detail1">
                  <div class="car-name" (click)="toggleCarCardVisibility(i)">
                    <div class="d-flex" style="gap:20px; align-items: center;">
                      <div class="car-profile-pic">
                        <img [src]="truck.imgUrl">
                      </div>
                      <p class="mt-3"><b>{{truck.name}}</b> </p>
                    </div>
                    <i class="fa-solid cardangle" id="icon1" [class.fa-angle-down]="!isCarCardVisible[i]" [class.fa-angle-up]="isCarCardVisible[i]"></i>
                  </div>
                  <div [style.display]="isCarCardVisible[i] ? 'inherit' : 'none'" [style.height]="isCarCardVisible[i] ? 'fit-content' : '0'">
                    <div class="d-flex" style="justify-content: space-between;">
                      <div class="package-details">
                        <p><b>Variant: {{techDetailsParameter.detailsList[i].variant[0]}}</b> </p>
                        <p><b>No.of Units: {{techDetailsParameter.detailsList[i].quantityy}}</b> </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            <div class="d-flex" style="gap:20px">
                <div class="package-details" style="min-width: 15rem;">
                    <p style="font-family: 'Verdana';"><b>Your chosen package: </b></p>
                    <p style="font-family: 'Verdana'; color: #0381BA;"><b>Your current installment is:</b></p>
                    <p style="font-family: 'Verdana'; font-family: 'Verdana';"><b>Your Total Amount of Finance </b></p>
                    <p style="font-family: 'Verdana';">Balloon Payment</p>
                    <p>Fees & Charges</p>
                    <p style="font-family: 'Verdana';">Repayment Frequency </p>
                    <p style="font-family: 'Verdana';">APR of </p>
                    <p style="font-family: 'Verdana';">Add on (installment)</p>
                    <!-- <p style="font-family: 'Verdana'; font-family: 'Verdana';"><b>Your Final Installment is</b></p> -->
                    <p style="font-family: 'Verdana';"><b>Your first payment is</b></p>
            
                </div>
                <div class="package-details" style="margin-right: 0;">
                    <p style="font-family: 'Verdana';"><b>{{package}}</b></p>
            
                    <p style="font-family: 'Verdana'; font-size: 12.8px; color: #0381BA;"><b>${{numberWithCommas(techDetailsParameter.pramData.pramData.leftcard.currentInstallment)}} / month</b></p>
            
                    <p style="font-family: 'Verdana'; font-family: 'Verdana';"><b>{{numberWithCommas(techDetailsParameter.pramData.tableData.financing)}}</b></p>
            
                    <p style="font-family: 'Verdana';">{{techDetailsParameter.pramData.pramData.leftcard.downpayment}}</p>
                    <p>$20,667.82</p>
            
                    <p style="font-family: 'Verdana';">Monthly</p>
            
                    <p style="font-family: 'Verdana';">{{techDetailsParameter.pramData.pramData.leftcard.APR}}</p>
            
                    <p style="font-family: 'Verdana';">{{techDetailsParameter.pramData.pramData.leftcard.addonInstallment}}</p>
            
                    <!-- <p style="font-family: 'Verdana'; font-family: 'Verdana';"><b>{{techDetailsParameter.pramData.pramData.leftcard.yourfinalinstallment}}</b></p> -->
            
                    <p style="font-family: 'Verdana';"><b>$ {{numberWithCommas(techDetailsParameter.pramData.pramData.leftcard.currentInstallment)}}</b></p>
            
                </div>
            </div>
            <div class="package-details mt-1">
                <p style="font-weight: 700; color: #0381BA;">Your monthly repayment starts from November 2023, every 1st of the month</p>
            </div>
    </div>
    <div>
        <div class="mb-3">
            <div class="an-body">
                <p><b>Application Status :</b> <span
                        style="border-radius: 10px;
                
                        background: #0A8835; padding: 5px 10px; margin-left: 3rem; color: white;">Approved</span>
                </p>
                    <div>
                            <img routerLink="/work-space" src="../../assets/arrow-circle-left.png">
                    </div>
            </div>

        </div>

        <!-- <div class="card right-side">

            <p class="an-head">VEHICLE DETAILS:</p>

            <div class="an-body">

                <p><b>Engine :</b>  12.6L 4 Cylinder 455HP</p>

                <p><b>Registration : </b> AAA123</p>

                <p><b> Insurance : </b> 19EISQ4516</p>

            </div>

            <div class="an-drag">

            </div>

        </div> -->

        <div class="card right-side">

            <p class="an-head">DEALERSHIP FOR DELIVERY:</p>

            <div class="an-body dealership">

                <p class="deal"><b>Street :</b> 64 Canterbury Rd</p>

                <p class="deal"><b>City :</b> Bayswater North VIC </p>

                <p><b>State / Province / Area :</b> Victoria</p>

            </div>

            <div class="an-body dealership">

                <p class="deal"><b>Zip Code :</b> 3153</p>

                <p class="deal"><b>Country :</b> Australia</p>

            </div>

        </div>
        <div class="card down-side">

            <p class="an-head">Contract Details</p>
            <p class="an-subhead" style="font-family: Verdana;"><b>Contract-784</b></p>

            <div class="d-flex">
                <div class="dealershipp" >
                    <p class="deall"><b>Program :</b> 28-Hire Purchase</p>
                    <p class="deall"><b>Installment Frequency :</b> Monthly</p> 
                    <p class="deall"><b>Lessor Rate :</b> 5.24%</p> 
                </div>
                
                <div class="dealershipp" >
                    <p class="deall"><b>Product :</b> Hire Purchase </p>
                    <p class="deall"><b>Installment Timing  :</b> Advance </p>
                    <p class="deall"><b>Contract Start Date  :</b> 02/11/2023 </p>
                </div>
    
                <div class="dealershipp">
                    <p class="deall"><b>Currency  :</b> AUD ($) </p>
                    <p class="deall"><b>Business Unit  :</b> Paccar </p>
                    <p class="deall"><b>Contract Maturity Date  :</b> 02/11/2028 </p>
                </div>

            </div>
        </div>
 

        <div class="card right-side">

            <div class="topnav">

                
                <a href="javascript:void(0);" (click)="showTransactionTable()" [ngClass]="{'active': activeLink === 'Repayment Schedule'}">Repayment Schedule</a>
               
                <a href="javascript:void(0);" (click)="showAccountDetails()" [ngClass]="{'active': activeLink === 'GIRO'}">Direct Debit</a>
                
                <a href="javascript:void(0);" (click)="showDisbursementDetails()"[ngClass]="{'active': activeLink === 'Disbursement History'}" >Disbursement History</a>

            </div>

 

            <div *ngIf="showAccount" style="margin-top: 1rem;">

                <div class="d-flex request-disbursement" style="    float: right;margin-top: -4rem;">

                    <div class="d-flex" style="margin-right:-2.5rem;">

                        <img style="width: 1.2rem; height: 1.2rem;" src="../assets/request.png" alt="img">

                        <p>Request</p>

                        <img style="width: 1.2rem; height: 1.2rem; margin-left:1rem;" src="../assets/receive-square-red.png" alt="img">

                        <p style="color: #0381BA; margin-right: 1rem;">Download</p>

                    </div>

                </div>

                <p class="an-head ">Direct Debit Details</p>

                <div class="an-body accountDetails">
                    <p><b>Bank and Branch Name:</b> {{ accountDetails.bankandbranchname }}</p>
                    

                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                    <p><b>Account Name:</b> {{ accountDetails.AccounName }}</p>

 

                </div>

 

                <div class="an-body accountDetails ">
                    <p><b>Account Number:</b> {{ accountDetails.accountNumber }}</p>
                    
                    
                    <p style="    margin-left: 4.9rem;  "><b>&nbsp;&nbsp;&nbsp;&nbsp; Account Type: </b> {{ accountDetails.AccountType }}</p>
                    
                </div>
                
                <div class="an-body ">
                    
                        <p><b>Payment Method:</b> {{ accountDetails.paymentMethod }}</p>
                  

                </div>

            </div>

 

            <div *ngIf="showDisbursement" style="margin-top: 1rem;">

                <div class="d-flex request-disbursement" style="    float: right;margin-top: -4rem; margin-right: -1.5rem;">

                    <img style="width: 1.2rem; height: 1.2rem;" src="../assets/receive-square.png" alt="img">

                    <p>Request Disbursement</p>

                </div>

                <p class="an-head ">Disbursement Details</p>

                <div class="an-body accountDetails">

                    <p><b>Total Sanction Amount:</b> {{numberWithCommas(techDetailsParameter.pramData.tableData.financing)}}</p>

                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                    <p><b>Total Disbursement Amount:</b>  {{numberWithCommas(techDetailsParameter.pramData.tableData.financing)}}</p>

                </div>

                <p class="an-head " style="font-size: 1rem;">Disbursement History</p>

                <!-- <div>

                    <div class="btn-group d-flex" role="group" aria-label="Basic example">

                        <button type="button" class="btn btn-secondary w-100 btn-grp-below-disbursment">All</button>

                        <button type="button" class="btn btn-secondary w-100 btn-grp-below-disbursment">Income</button>

                        <button type="button" class="btn btn-secondary w-100 btn-grp-below-disbursment">Outcome</button>

                    </div>

                </div> -->

                <div class="mt-2">

                    <div class="d-flex">

                        <div class="empty-box"></div>

                        <div class="ps-2 mt-2">

                            <p class="empty-box-p1"><b> {{numberWithCommas(techDetailsParameter.pramData.tableData.financing)}}</b></p>

                            <p class="text-muted empty-box-p2">11-10-2023, 04:15pm</p>

                            <p class="empty-box-p3"><b>Ref.No:637232772</b></p>

                        </div>

                    </div>

                    <!-- <div class="d-flex">

                        <div class="empty-box"></div>

                        <div class="ps-2 mt-2">

                            <p class="empty-box-p1"><b>$10700.00</b></p>

                            <p class="text-muted empty-box-p2">27-07-2023, 04:15pm</p>

                            <p class="empty-box-p3"><b>Ref.No:637232772</b></p>

                        </div>

                    </div> -->

                </div>

            </div>

            <div *ngIf="showTransaction" style="margin-top: 1rem;">

                <div class="d-flex request-disbursement" style="    float: right;margin-top: -4rem;">

                    <div class="d-flex">

                        <img style="width: 1.2rem; height: 1.2rem; margin-right: 0rem;" src="../assets/receive-square-red.png" alt="img">

                        <p style="color: #0381BA; margin-right: 1rem;">Download</p>

                        <img style="width: 1.2rem; height: 1.2rem;" src="../assets/sms.png" alt="img">

                        <p>Email</p>

                    </div>

                </div>

                <p class="an-head"> Repayment Schedule</p>

                <div class="an-body table-settings">

                    <ag-grid-angular style="width: 150%; height: 17.5rem; overflow: hidden;" class="ag-theme-alpine"

                        [rowData]="rowData$ | async" [columnDefs]="columnDefs" [defaultColDef]="defaultColDef"

                        [rowHeight]="33">

                    </ag-grid-angular>
                </div>